<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Date 相关记录 | Lei的博客</title>
    <meta name="description" content="每天都要有进步，学无止境，永不停步！">
    
    
    <link rel="preload" href="/myBlog/assets/css/0.styles.973851e9.css" as="style"><link rel="preload" href="/myBlog/assets/js/app.f51a9172.js" as="script"><link rel="preload" href="/myBlog/assets/js/28.657125ec.js" as="script"><link rel="prefetch" href="/myBlog/assets/js/10.8cc0ce2f.js"><link rel="prefetch" href="/myBlog/assets/js/11.041cd10c.js"><link rel="prefetch" href="/myBlog/assets/js/12.b350a238.js"><link rel="prefetch" href="/myBlog/assets/js/13.f22a9768.js"><link rel="prefetch" href="/myBlog/assets/js/14.c54efdd3.js"><link rel="prefetch" href="/myBlog/assets/js/15.4fd8c402.js"><link rel="prefetch" href="/myBlog/assets/js/16.97db5184.js"><link rel="prefetch" href="/myBlog/assets/js/17.d4e41897.js"><link rel="prefetch" href="/myBlog/assets/js/18.4d6757de.js"><link rel="prefetch" href="/myBlog/assets/js/19.9242cb0a.js"><link rel="prefetch" href="/myBlog/assets/js/2.a99daba0.js"><link rel="prefetch" href="/myBlog/assets/js/20.2c108eac.js"><link rel="prefetch" href="/myBlog/assets/js/21.db0d9500.js"><link rel="prefetch" href="/myBlog/assets/js/22.893c3525.js"><link rel="prefetch" href="/myBlog/assets/js/23.b1060c79.js"><link rel="prefetch" href="/myBlog/assets/js/24.57fe8df0.js"><link rel="prefetch" href="/myBlog/assets/js/25.c1e8da1b.js"><link rel="prefetch" href="/myBlog/assets/js/26.73cdf14c.js"><link rel="prefetch" href="/myBlog/assets/js/27.ba36ea5f.js"><link rel="prefetch" href="/myBlog/assets/js/29.ae768734.js"><link rel="prefetch" href="/myBlog/assets/js/3.12cfd188.js"><link rel="prefetch" href="/myBlog/assets/js/30.73f9eed8.js"><link rel="prefetch" href="/myBlog/assets/js/31.8461df10.js"><link rel="prefetch" href="/myBlog/assets/js/32.aeb09adb.js"><link rel="prefetch" href="/myBlog/assets/js/33.47d2fa9a.js"><link rel="prefetch" href="/myBlog/assets/js/34.7c4090eb.js"><link rel="prefetch" href="/myBlog/assets/js/35.f379ccfd.js"><link rel="prefetch" href="/myBlog/assets/js/36.d7f99786.js"><link rel="prefetch" href="/myBlog/assets/js/37.c5464836.js"><link rel="prefetch" href="/myBlog/assets/js/38.526e1cbf.js"><link rel="prefetch" href="/myBlog/assets/js/4.0e05ada0.js"><link rel="prefetch" href="/myBlog/assets/js/5.951e911d.js"><link rel="prefetch" href="/myBlog/assets/js/6.86ccfe4e.js"><link rel="prefetch" href="/myBlog/assets/js/7.3cf4b244.js"><link rel="prefetch" href="/myBlog/assets/js/8.b66518e8.js"><link rel="prefetch" href="/myBlog/assets/js/9.23905edd.js">
    <link rel="stylesheet" href="/myBlog/assets/css/0.styles.973851e9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myBlog/" class="home-link router-link-active"><!----> <span class="site-name">Lei的博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myBlog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/myBlog/jsnotes/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/myBlog/cssnotes/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/myBlog/interview/" class="nav-link">面试题集</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myBlog/doms/" class="nav-link">DOM</a></li><li class="dropdown-item"><!----> <a href="/myBlog/demos/" class="nav-link">场景实例</a></li></ul></div></div> <a href="https://github.com/leichangchun/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myBlog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/myBlog/jsnotes/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/myBlog/cssnotes/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/myBlog/interview/" class="nav-link">面试题集</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myBlog/doms/" class="nav-link">DOM</a></li><li class="dropdown-item"><!----> <a href="/myBlog/demos/" class="nav-link">场景实例</a></li></ul></div></div> <a href="https://github.com/leichangchun/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/myBlog/jsnotes/" class="sidebar-link">JavaScript</a></li><li><a href="/myBlog/jsnotes/js-dom-css.html" class="sidebar-link">原生JavaScript操作DOM</a></li><li><a href="/myBlog/jsnotes/js-scope.html" class="sidebar-link">作用域相关概念</a></li><li><a href="/myBlog/jsnotes/js-this.html" class="sidebar-link">this的指向问题</a></li><li><a href="/myBlog/jsnotes/js-deepcopy.html" class="sidebar-link">实现数组和对象的深浅拷贝</a></li><li><a href="/myBlog/jsnotes/js-obj-extend.html" class="sidebar-link">实现对象合并功能</a></li><li><a href="/myBlog/jsnotes/js-type-judgement.html" class="sidebar-link">类型判断</a></li><li><a href="/myBlog/jsnotes/js-type-autochange.html" class="sidebar-link">那些不经意间发生的数据类型自动转换</a></li><li><a href="/myBlog/jsnotes/js-getter-setter.html" class="sidebar-link">getter和setter</a></li><li><a href="/myBlog/jsnotes/js-travesal.html" class="sidebar-link">JavaScript遍历对象</a></li><li><a href="/myBlog/jsnotes/js-date.html" class="active sidebar-link">Date 相关记录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/jsnotes/js-date.html#构建时间对象" class="sidebar-link">构建时间对象</a></li><li class="sidebar-sub-header"><a href="/myBlog/jsnotes/js-date.html#自动折算" class="sidebar-link">自动折算</a></li><li class="sidebar-sub-header"><a href="/myBlog/jsnotes/js-date.html#类型转换" class="sidebar-link">类型转换</a></li><li class="sidebar-sub-header"><a href="/myBlog/jsnotes/js-date.html#时间戳" class="sidebar-link">时间戳</a></li><li class="sidebar-sub-header"><a href="/myBlog/jsnotes/js-date.html#原生方法" class="sidebar-link">原生方法</a></li></ul></li><li><a href="/myBlog/jsnotes/js-remove-arrayrepeat.html" class="sidebar-link">从“繁”到“简”进行数组去重</a></li><li><a href="/myBlog/jsnotes/js-has-property.html" class="sidebar-link">JavaScript 判断对象中是否有某属性</a></li><li><a href="/myBlog/jsnotes/js-reg-lastindex.html" class="sidebar-link">lastIndex对正则结果的影响</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="date-相关记录"><a href="#date-相关记录" aria-hidden="true" class="header-anchor">#</a> Date 相关记录</h1> <p>处理时间是常见的需求，总结下Date类的相关知识</p> <h2 id="构建时间对象"><a href="#构建时间对象" aria-hidden="true" class="header-anchor">#</a> 构建时间对象</h2> <blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener noreferrer">Date<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对象基于1970年1月1日（世界标准时间）起的毫秒数。</p></blockquote> <p>构建对象实例有多种方式:</p> <ol><li>不传入参数，默认以系统当前时间返回一个时间对象.<code>new Date();</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Wed Mar 13 2019 10:49:28 GMT+0800 (中国标准时间)</span>
</code></pre></div><p>返回的是一个<em>对象实例</em>，控制台打印了时间字符串，是默认调用了<code>toString()</code>方法。</p> <ol start="2"><li>传入 自1970年1月1日00:00:00 (世界标准时间) 起经过的<em>毫秒数</em>.<code>new Date(value);</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1323532800000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Sun Dec 11 2011 00:00:00 GMT+0800 (中国标准时间)</span>

    <span class="token comment">// 可以传入负数，代表1970年1月1日00:00:00之前的时间</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Thu Jan 01 1970 07:59:50 GMT+0800 (中国标准时间)</span>
</code></pre></div><ol start="3"><li>传入 表示日期的字符串.<code>new Date(dateString);</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011-11-11'</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011/11/11'</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'11/11/2011'</span><span class="token punctuation">)</span>
    <span class="token comment">// Fri Nov 11 2011 00:00:00 GMT+0800 (中国标准时间)</span>

    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'Sun Dec 11 2011 00:00:00'</span><span class="token punctuation">)</span>
    <span class="token comment">// Sun Dec 11 2011 00:00:00 GMT+0800 (中国标准时间)  注意这里是12月份了，11代表的12月</span>

    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011-11-11 11:11:11'</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011-11-11T11:11:11'</span><span class="token punctuation">)</span>
    <span class="token comment">// Fri Nov 11 2011 11:11:11 GMT+0800 (中国标准时间)</span>

    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span>
    <span class="token comment">// Invalid Date</span>
</code></pre></div><p>只要能被<code>[Date.parse()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)</code>解析的字符串，都可以作为参数传入。</p> <ol start="4"><li>传入 年月日等多个整数参数. <code>new Date(year, month[, day[, hour[, minutes[, seconds[, milliseconds]]]]]);</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span>
    <span class="token comment">// Sun Dec 11 2011 11:11:11 GMT+0800 (中国标准时间)</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
    <span class="token comment">// Thu Dec 01 2011 00:00:00 GMT+0800 (中国标准时间)</span>
   
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">)</span>
    <span class="token comment">// Thu Jan 01 1970 08:00:02 GMT+0800 (中国标准时间)  只传入一个整数参数，会被当做毫秒数解析</span>

    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span> 
    <span class="token comment">//Sun Dec 11 2011 00:00:00 GMT+0800 (中国标准时间)  传入的参数会进行转换</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2011.11'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
    <span class="token comment">//Sun Dec 11 2011 00:00:00 GMT+0800 (中国标准时间)</span>

    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
    <span class="token comment">// Invalid Date  无法转换成数字的参数</span>
</code></pre></div><p>这种方式<strong>至少需要传入两个整数参数</strong>标志年、月，只传入一个参数会当做毫秒数进行构建；传入的参数会自动转换成数字，所以例子中传入数字字符串也是可以创建成功的。</p> <p>如果<strong>把<code>Date()</code>直接当作函数调用</strong>，不过有没有传入参数，都会返回当前时间的时间字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;Wed Mar 13 2019 20:22:42 GMT+0800 (中国标准时间)&quot;</span>
<span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;Wed Mar 13 2019 20:22:47 GMT+0800 (中国标准时间)&quot;</span>
</code></pre></div><h2 id="自动折算"><a href="#自动折算" aria-hidden="true" class="header-anchor">#</a> 自动折算</h2> <p>时间的参数都是有范围的：</p> <ul><li>年 使用四位数年份，比如2000。如果写成两位数或个位数，则加上1900，即10代表1910年。如果是负数，表示公元前</li> <li>月份的范围是0~11 (0是一月份，11是12月份)</li> <li>天数的范围是1~31</li> <li>小时的范围是0~23</li> <li>分钟的范围是0~59</li> <li>秒数的范围是0~59</li> <li>毫秒的范围是0~999</li></ul> <p>如果创建时间对象的时候，传入的参数超出了实际范围会怎样呢？</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
    <span class="token comment">// Tue Jan 11 2011 00:00:00 GMT+0800 (中国标准时间)  月的参数12超出了范围，年份多了一年，然后月份变成了1月份（对应参数0）</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// Tue Nov 30 2010 00:00:00 GMT+0800 (中国标准时间)  天的参数0不在范围内，所以月份变成了11（对应参数10），然后天变成了30</span>
    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span>
    <span class="token comment">// Sun Dec 12 2010 01:00:00 GMT+0800 (中国标准时间)  小时的参数25超出了范围，天数变成了12，然后小时变成了1</span>
</code></pre></div><p>当传入的参数超出了实际范围，<strong>会自动折算成合理的范围</strong> ， 相邻的数值也会进行调整。</p> <p>利用这个特性可以做很多的事情，比如，你想<strong>获取2012年2月有共有多少天</strong>，可以这样处理。</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 29  -- 三月(对应2)没有0天，所以折算到二月（对应1）的最后一天，这时取得getDate()即是该月的天数</span>
</code></pre></div><h2 id="类型转换"><a href="#类型转换" aria-hidden="true" class="header-anchor">#</a> 类型转换</h2> <p>如果<code>+</code> 或者 <code>==</code> 运算符其中一个操作数是对象时，需要先把对象转化成原始值。其他的对象都会先调用<code>valueOf()</code> 方法，而时间对象类型会先调用<code>toString()</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;1Thu Mar 14 2019 13:51:46 GMT+0800 (中国标准时间)&quot;</span>

<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token comment">// false 后面的Date对象，调用了toString()</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token comment">// true 此时隐式转换期待转换为数字，调用了valueOf()</span>
</code></pre></div><p>其他期待转换为数字的场景，也是正常先调用<code>valueOf()</code>的</p> <h2 id="时间戳"><a href="#时间戳" aria-hidden="true" class="header-anchor">#</a> 时间戳</h2> <p>时间对象在传递过程中，一般会转换为时间戳，有多种实现方式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 1323532800000</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 1323532800000</span>
<span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token comment">// 1323532800000</span>

Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 1552543813256  当前时间距离时间零点（1970年1月1日 00:00:00 UTC）的毫秒数</span>
</code></pre></div><p>注意以上都是毫秒，如果要转成UNIX时间戳（从1970年1月1日（UTC/GMT的午夜）开始所经过的秒数），可以用以下方法</p> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>ms<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="原生方法"><a href="#原生方法" aria-hidden="true" class="header-anchor">#</a> 原生方法</h2> <p>Date对象提供了多种方法来获取/设置时间数据</p> <ol><li>Date对象提供了一系列get*方法，用来获取实例对象某个方面的值。</li></ol> <ul><li>getTime()：返回实例距离1970年1月1日00:00:00的毫秒数，等同于valueOf方法。</li> <li>getDate()：返回实例对象对应每个月的几号（从1开始）。</li> <li>getDay()：返回星期几，星期日为0，星期一为1，以此类推。</li> <li>getFullYear()：返回四位的年份。</li> <li>getMonth()：返回月份（0表示1月，11表示12月）。</li> <li>getHours()：返回小时（0-23）。</li> <li>getMilliseconds()：返回毫秒（0-999）。</li> <li>getMinutes()：返回分钟（0-59）。</li> <li>getSeconds()：返回秒（0-59）。</li> <li>getTimezoneOffset()：返回当前时间与 UTC 的时区差异，以分钟表示，返回结果考虑到了夏令时因素。</li></ul> <p>还提供了这些方法对应的 UTC 版本，用来返回 UTC 时间。</p> <ul><li>getUTCDate()</li> <li>getUTCFullYear()</li> <li>getUTCMonth()</li> <li>getUTCDay()</li> <li>getUTCHours()</li> <li>getUTCMinutes()</li> <li>getUTCSeconds()</li> <li>getUTCMilliseconds()</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 11</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUTCHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 3 可见UTC时间比北京时间晚8个小时，也就是下面的时区差异 -480分钟</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimezoneOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// -480</span>
</code></pre></div><ol start="2"><li>Date对象提供了一系列set*方法，用来设置实例对象的各个方面。</li></ol> <ul><li>setDate(date)：设置实例对象对应的每个月的几号（1-31），返回改变后毫秒时间戳。</li> <li>setFullYear(year [, month, date])：设置四位年份。</li> <li>setHours(hour [, min, sec, ms])：设置小时（0-23）。</li> <li>setMilliseconds()：设置毫秒（0-999）。</li> <li>setMinutes(min [, sec, ms])：设置分钟（0-59）。</li> <li>setMonth(month [, date])：设置月份（0-11）。</li> <li>setSeconds(sec [, ms])：设置秒（0-59）。</li> <li>setTime(milliseconds)：设置毫秒时间戳。</li></ul> <p>这些方法基本是跟get<em>方法一一对应的，但是<strong>没有setDay方法，因为星期几是计算出来的，而不是设置的</strong>。
set</em>系列方法除了setTime()，都有对应的 UTC 版本，即设置 UTC 时区的时间。</p> <ul><li>setUTCDate()</li> <li>setUTCFullYear()</li> <li>setUTCHours()</li> <li>setUTCMilliseconds()</li> <li>setUTCMinutes()</li> <li>setUTCMonth()</li> <li>setUTCSeconds()</li></ul> <p>设置时间的方法，配合自动折算，可以很便捷的得到相对时间</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 99天之后的时间</span>
now<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">99</span><span class="token punctuation">)</span>

<span class="token comment">// 10小时之前</span>
now<span class="token punctuation">.</span><span class="token function">setHours</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span>

</code></pre></div><ol start="3"><li>date对象提供一系列to* ，用来将时间对象转换为字符串</li></ol> <ul><li>toString() 返回一个完整的日期字符串。</li> <li>toDateString() 返回年月日的字符串</li> <li>toTimeString() 返回时间字符串，不包含年月日</li></ul> <p>也有对应的 UTC 版本 和 local版本</p> <ul><li>toUTCString() 返回对应的 UTC 时间，也就是比北京时间晚8个小时。</li> <li>toLocaleString() 返回完整的本地时间。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
undefined
now<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;Thu Mar 14 2019 14:32:18 GMT+0800 (中国标准时间)&quot;</span>
now<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;Thu, 14 Mar 2019 06:32:18 GMT&quot;    UTC时间比北京时间晚8个小时</span>
now<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;2019/3/14 下午2:32:18&quot;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/myBlog/jsnotes/js-travesal.html" class="prev">
          JavaScript遍历对象
        </a></span> <span class="next"><a href="/myBlog/jsnotes/js-remove-arrayrepeat.html">
          从“繁”到“简”进行数组去重
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/myBlog/assets/js/app.f51a9172.js" defer></script><script src="/myBlog/assets/js/28.657125ec.js" defer></script>
  </body>
</html>
